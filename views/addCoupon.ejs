<!-- include footer -->
<%- include('include/adminBase.ejs') %>
    <!-- /include footer -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/6.4.2/mdb.min.css" rel="stylesheet" />

    <style>
      .errorP{
          color: red;
          font-size: small;
  
      }
  </style>
    <!-- CONTENT -->
    <section id="content">


        <!-- MAIN -->
        <main>
            <div class="table-data">
                <div class="order">
                    <div class="head">
                        <h3>Add Coupon</h3>

                        <a href="/admin-Coupon"> <button class="btn btn-rounded"
                                style="background-color: #131921 ; color: white;"> <i class='bx bx-exit'></i>Go
                                Back</button></i></a>
                    </div>
                    <div class="container coupon-container">



                        <form action="/add-Coupon" method="post" id="coupon-form">
                            <div class="form-group">
                                <label for="coupon-code">Coupon Code</label>
                                <input type="text" class="form-control" id="coupon-code" placeholder="Enter Coupon Code" name="couponCode" >
                                <small id="coupon-code-error" class="text-danger"></small>
                                <p class="errorP <%= !couponCodeError?'d-none':''  %>" ><%=couponCodeError  %></p>
                                <p class="errorP <%= !couponCodeRegex?'d-none':''  %>" ><%=couponCodeRegex  %></p>
                            </div>
                            <div class="form-group">
                                <label for="discount">Discount (%)</label>
                                <input type="number" class="form-control" id="discount" placeholder="Enter Discount Percentage" name="discount">
                                <small id="discount-error" class="text-danger"></small>
                                <p class="errorP <%= !discountError?'d-none':''  %>" ><%=discountError  %></p>
                                <p class="errorP <%= !discountRegex?'d-none':''  %>" ><%=discountRegex  %></p>
                            </div>
                            <div class="form-group">
                                <label for="valid-from">Valid From</label>
                                <input type="date" class="form-control" id="valid-from" name="validFrom">
                                <small id="valid-from-error" class="text-danger"></small>
                                <p class="errorP <%= !validFromError?'d-none':''  %>" ><%=validFromError  %></p>
                            </div>
                            <div class="form-group">
                                <label for="valid-to">Valid To</label>
                                <input type="date" class="form-control" id="valid-to" name="validTo">
                                <small id="valid-to-error" class="text-danger"></small>
                                <p class="errorP <%= !validToError?'d-none':''  %>" ><%=validToError  %></p>
                            </div>
                            <h1></h1>
                            <button type="submit" class="btn" style="background-color: #131921; color: white;">Add Coupon</button>
                        </form>

                    </div>
                </div>
            </div>
        </main>
        <!-- MAIN -->
    </section>
    <!-- CONTENT -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  document.addEventListener('DOMContentLoaded', function () {
      document.getElementById('coupon-form').addEventListener('submit', function (event) {
          // Perform validation checks
          if (!validateForm()) {
              // Prevent form submission if validation fails
              event.preventDefault();
          }
      });

      // Validate form inputs
      function validateForm() {
          const couponCode = document.getElementById('coupon-code').value.trim();
          const discount = document.getElementById('discount').value.trim();
          const validFrom = document.getElementById('valid-from').value;
          const validTo = document.getElementById('valid-to').value;

          let valid = true;

          // Validate coupon code (Alphanumeric)
          const couponCodeRegex = /^[a-zA-Z0-9]+$/
          if (!couponCodeRegex.test(couponCode)) {
              showAlert("Coupon code should be Alphabetic and Numeric");
              valid = false;
          }

          // Validate discount (Numeric)
          const discountRegex = /^[0-9]+$/
          if (!discountRegex.test(discount)) {
              showAlert("Discount should be a numeric value");
              valid = false;
          }

          // Validate valid from date
          if (!validFrom) {
              showAlert("Valid from date is required");
              valid = false;
          }

          // Validate valid to date
          if (!validTo) {
              showAlert("Valid to date is required");
              valid = false;
          }

          return valid;
      }

      // Function to show SweetAlert2 alert
      function showAlert(message) {
          Swal.fire({
              icon: 'error',
              title: 'Validation Error',
              text: message,
          });
      }
  });
</script>


    </body>

    </html>